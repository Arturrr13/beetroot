import{g as M,y as H,u as C,n as V,i as T,c,a,F as z,z as I,x as g,A as L,B as q,C as B,D as E,o as l,E as N,t as A,G as m,H as b,p as k,e as F,_ as K}from"./entry.6fcdd752.js";import{S as d}from"./SocketEvent.b1909740.js";const _=r=>(k("data-v-15666a65"),r=r(),F(),r),O={class:"content"},P={class:"chat__wrapper"},j={key:0,class:"message"},J={key:1,class:"image"},R=["src"],U={class:"send__wrapper"},G={class:"upload__wrapper"},$=_(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 384 512"},[a("path",{d:"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 408c0 13.3-10.7 24-24 24s-24-10.7-24-24V305.9l-31 31c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l72-72c9.4-9.4 24.6-9.4 33.9 0l72 72c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-31-31V408z"})],-1)),Q=["onKeydown"],W=_(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[a("path",{d:"M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"})],-1)),X=[W],Y=M({__name:"index",setup(r){const{t:h}=H();C({title:h("nav.nav-chat")});const{$io:i}=E(),s=V({message:"",id:"",messages:new Array});T(()=>{localStorage.hasOwnProperty("Messages")&&v(),i.connect(),i.on(d.new_count,e=>{s.id===""&&(s.id=e.id),e.message!==void 0&&s.messages.push({message:e.message,user:e.id}),e.image!==void 0&&s.messages.push({image:e.image,user:e.id})});const o=document.querySelector(".chat__wrapper");setTimeout(()=>{var e;(e=document.querySelector(".chat__wrapper"))==null||e.scrollTo(0,o.scrollHeight+200)},250)});function y(o){const t=o.target.files[0],n=new FileReader;n.onload=S=>{const x=document.querySelector(".chat__wrapper");i.emit(d.up,{value:S.target.result,type:"image"}),setTimeout(()=>{var u;(u=document.querySelector(".chat__wrapper"))==null||u.scrollTo(0,x.scrollHeight+200)},250)},n.readAsDataURL(t)}function p(){if(s.message!==""){const o=document.querySelector("textarea"),e=o.parentElement,t=document.querySelector(".chat__wrapper");i.emit(d.up,{value:s.message,type:"message"}),s.message="",setTimeout(()=>{var n;o.style.height="auto",e.style.height="auto",(n=document.querySelector(".chat__wrapper"))==null||n.scrollTo(0,t.scrollHeight+200)},250),w()}}const w=()=>localStorage.setItem("Messages",JSON.stringify(s.messages)),v=()=>s.messages=JSON.parse(localStorage.getItem("Messages")||"");function f(o){const e=o.target,t=e.parentElement,n=()=>{setTimeout(function(){e.style.height="auto",e.style.padding="10px",e.style.height=e.scrollHeight+"px",t.style.height=e.scrollHeight+"px"},0)};e.clientHeight<150||o.key==="Backspace"?n():setTimeout(function(){e.style.overflow="auto"},0)}return(o,e)=>(l(),c("div",O,[a("div",P,[(l(!0),c(z,null,I(g(s).messages,(t,n)=>(l(),c("div",{key:n,class:N([{yourMessage:t.user===g(s).id},"message__wrapper"])},[t.message?(l(),c("div",j,[a("span",null,A(t.message),1)])):m("",!0),t.image?(l(),c("div",J,[a("img",{src:t.image,alt:"Message"},null,8,R)])):m("",!0)],2))),128))]),a("div",U,[a("div",G,[a("input",{type:"file",accept:".jpg, .jpeg, .png",onChange:y},null,32),$]),L(a("textarea",{placeholder:"Message","onUpdate:modelValue":e[0]||(e[0]=t=>g(s).message=t),onKeydown:[B(b(p,["prevent"]),["enter"]),f],rows:"1"},null,40,Q),[[q,g(s).message]]),a("button",{type:"button",onClick:p,class:"btn__send"},X)])]))}});const ee=K(Y,[["__scopeId","data-v-15666a65"]]);export{ee as default};
